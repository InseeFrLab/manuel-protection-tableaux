<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>manuel - 4&nbsp; Comment analyser une demande ?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./05_les_outils.html" rel="next">
<link href="./03_notions.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04_analyser_une_demande.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Comment analyser une demande ?</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">manuel</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_regles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Règles</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_notions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Notions principales à connaître</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_analyser_une_demande.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Comment analyser une demande ?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_les_outils.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Présentation des outils</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_fiches_pratiques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Fiches pratiques</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_annexes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Annexes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_lexique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lexique</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#étapes-de-lanalyse-de-demande" id="toc-étapes-de-lanalyse-de-demande" class="nav-link active" data-scroll-target="#étapes-de-lanalyse-de-demande"><span class="header-section-number">4.1</span> Étapes de l’analyse de demande</a>
  <ul class="collapse">
  <li><a href="#prendre-connaissance-de-la-demande-et-sassurer-que-toutes-les-informations-nécessaires-à-la-gestion-de-la-confidentialité-ont-été-fournies." id="toc-prendre-connaissance-de-la-demande-et-sassurer-que-toutes-les-informations-nécessaires-à-la-gestion-de-la-confidentialité-ont-été-fournies." class="nav-link" data-scroll-target="#prendre-connaissance-de-la-demande-et-sassurer-que-toutes-les-informations-nécessaires-à-la-gestion-de-la-confidentialité-ont-été-fournies."><span class="header-section-number">4.1.1</span> Prendre connaissance de la demande et s’assurer que toutes les informations nécessaires à la gestion de la confidentialité ont été fournies.</a></li>
  <li><a href="#la-demande-peut-elle-être-séparée-en-plusieurs-sous-demandes-indépendantes" id="toc-la-demande-peut-elle-être-séparée-en-plusieurs-sous-demandes-indépendantes" class="nav-link" data-scroll-target="#la-demande-peut-elle-être-séparée-en-plusieurs-sous-demandes-indépendantes"><span class="header-section-number">4.1.2</span> La demande peut-elle être séparée en plusieurs sous-demandes indépendantes ?</a></li>
  <li><a href="#lister-les-tableaux-nécessaires-pour-la-pose-de-secret" id="toc-lister-les-tableaux-nécessaires-pour-la-pose-de-secret" class="nav-link" data-scroll-target="#lister-les-tableaux-nécessaires-pour-la-pose-de-secret"><span class="header-section-number">4.1.3</span> Lister les tableaux nécessaires pour la pose de secret</a></li>
  <li><a href="#construire-les-hiérarchies-éventuellement-nécessaires" id="toc-construire-les-hiérarchies-éventuellement-nécessaires" class="nav-link" data-scroll-target="#construire-les-hiérarchies-éventuellement-nécessaires"><span class="header-section-number">4.1.4</span> Construire les hiérarchies éventuellement nécessaires</a></li>
  <li><a href="#construire-les-tableaux-à-partir-des-tableaux-fournis-par-lutilisateur-si-besoin" id="toc-construire-les-tableaux-à-partir-des-tableaux-fournis-par-lutilisateur-si-besoin" class="nav-link" data-scroll-target="#construire-les-tableaux-à-partir-des-tableaux-fournis-par-lutilisateur-si-besoin"><span class="header-section-number">4.1.5</span> Construire les tableaux à partir des tableaux fournis par l’utilisateur (si besoin)</a></li>
  <li><a href="#procéder-à-la-pose-du-masque-en-opérant-comme-indiqué-dans-le-chapitre-6-fiches-pratiques." id="toc-procéder-à-la-pose-du-masque-en-opérant-comme-indiqué-dans-le-chapitre-6-fiches-pratiques." class="nav-link" data-scroll-target="#procéder-à-la-pose-du-masque-en-opérant-comme-indiqué-dans-le-chapitre-6-fiches-pratiques."><span class="header-section-number">4.1.6</span> Procéder à la pose du masque en opérant comme indiqué dans le chapitre 6 <code>Fiches pratiques</code>.</a></li>
  </ul></li>
  <li><a href="#détecter-les-liens" id="toc-détecter-les-liens" class="nav-link" data-scroll-target="#détecter-les-liens"><span class="header-section-number">4.2</span> Détecter les liens</a></li>
  <li><a href="#passer-de-la-liste-de-diffusion-à-la-liste-de-protection" id="toc-passer-de-la-liste-de-diffusion-à-la-liste-de-protection" class="nav-link" data-scroll-target="#passer-de-la-liste-de-diffusion-à-la-liste-de-protection"><span class="header-section-number">4.3</span> Passer de la liste de diffusion à la liste de protection</a></li>
  <li><a href="#fiches-exemples-danalyse-de-demandes" id="toc-fiches-exemples-danalyse-de-demandes" class="nav-link" data-scroll-target="#fiches-exemples-danalyse-de-demandes"><span class="header-section-number">4.4</span> Fiches exemples d’analyse de demandes</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Comment analyser une demande ?</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>La liste de tableaux à diffuser n’est pas la même que la liste des tableaux à protéger. En effet, la liste de tableaux à protéger découle d’une analyse des liens entre les différents tableaux. Cette partie a pour but de présenter le cadre de réflexion et les étapes suivies par la DMRG pour définir la liste de tableaux sur lesquels le masque de secret sera posé.</p>
<section id="étapes-de-lanalyse-de-demande" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="étapes-de-lanalyse-de-demande"><span class="header-section-number">4.1</span> Étapes de l’analyse de demande</h2>
<section id="prendre-connaissance-de-la-demande-et-sassurer-que-toutes-les-informations-nécessaires-à-la-gestion-de-la-confidentialité-ont-été-fournies." class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="prendre-connaissance-de-la-demande-et-sassurer-que-toutes-les-informations-nécessaires-à-la-gestion-de-la-confidentialité-ont-été-fournies."><span class="header-section-number">4.1.1</span> Prendre connaissance de la demande et s’assurer que toutes les informations nécessaires à la gestion de la confidentialité ont été fournies.</h3>
<p>Les informations nécessaires sont :</p>
<ul>
<li><p>une description précise des tableaux que votre interlocuteur souhaite diffuser :</p>
<ul>
<li>sur quel champ de la population les tableaux sont-ils construits ?</li>
<li>quelles sont les variables descriptives (de croisement) ?</li>
<li>quelle est la variable de réponse pour chacun des tableaux ?</li>
<li>les tableaux sont-ils des tableaux de fréquence ou bien des tableaux de volume ?</li>
<li>parmi l’ensemble des variables de croisement, certaines sont-elles hiérarchiques ? Les emboîtements ont-ils été fournis ?</li>
</ul></li>
<li><p>une description précise des liens éventuels entre les variables ou tableaux :</p>
<ul>
<li>certaines variables ou modalités sont-elles reliées par une équation ?</li>
<li>des équations/liens ont-ils été fournis ?</li>
<li>de fortes corrélations existent-elles entre certaines variables de réponse ?</li>
</ul></li>
</ul>
</section>
<section id="la-demande-peut-elle-être-séparée-en-plusieurs-sous-demandes-indépendantes" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="la-demande-peut-elle-être-séparée-en-plusieurs-sous-demandes-indépendantes"><span class="header-section-number">4.1.2</span> La demande peut-elle être séparée en plusieurs sous-demandes indépendantes ?</h3>
<ul>
<li><p>Des tableaux portant sur des variable de réponse différentes, non liées par une équation ou par un lien de corrélation fort, peuvent être traités séparément.</p></li>
<li><p>Des tableaux construits sur des champs différents et non complémentaires peuvent être traités séparément.</p></li>
<li><p>Y a-t-il au contraire des tableaux qui doivent être traités dans dans le même temps ?</p>
<ul>
<li>rassembler les tableaux partageant la même variable de réponse et le même champ, car ils partagent a minima le même super-total (n.b.&nbsp;on ne les fusionne pas on les rassemblent juste pour les traiter ensemble)</li>
<li>déterminer les tableaux liés entre eux par leurs marges</li>
<li>déterminer les tableaux liés entre eux car “additifs”</li>
<li>déterminer les tableaux liés entre eux par la présence potentielle de hiérarchies non-emboîtées</li>
</ul></li>
</ul>
<p>Chaque sous-demande doit faire l’objet d’un traitement à part, en suivant les mêmes étapes.</p>
</section>
<section id="lister-les-tableaux-nécessaires-pour-la-pose-de-secret" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="lister-les-tableaux-nécessaires-pour-la-pose-de-secret"><span class="header-section-number">4.1.3</span> Lister les tableaux nécessaires pour la pose de secret</h3>
<p>Rassembler en un seul tableau les tableaux liés car “additifs”.</p>
<p>Séparer en plusieurs tableaux un tableau qui contiendrait des sous-totaux non-emboîtés.</p>
</section>
<section id="construire-les-hiérarchies-éventuellement-nécessaires" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="construire-les-hiérarchies-éventuellement-nécessaires"><span class="header-section-number">4.1.4</span> Construire les hiérarchies éventuellement nécessaires</h3>
</section>
<section id="construire-les-tableaux-à-partir-des-tableaux-fournis-par-lutilisateur-si-besoin" class="level3" data-number="4.1.5">
<h3 data-number="4.1.5" class="anchored" data-anchor-id="construire-les-tableaux-à-partir-des-tableaux-fournis-par-lutilisateur-si-besoin"><span class="header-section-number">4.1.5</span> Construire les tableaux à partir des tableaux fournis par l’utilisateur (si besoin)</h3>
</section>
<section id="procéder-à-la-pose-du-masque-en-opérant-comme-indiqué-dans-le-chapitre-6-fiches-pratiques." class="level3" data-number="4.1.6">
<h3 data-number="4.1.6" class="anchored" data-anchor-id="procéder-à-la-pose-du-masque-en-opérant-comme-indiqué-dans-le-chapitre-6-fiches-pratiques."><span class="header-section-number">4.1.6</span> Procéder à la pose du masque en opérant comme indiqué dans le chapitre 6 <code>Fiches pratiques</code>.</h3>
</section>
</section>
<section id="détecter-les-liens" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="détecter-les-liens"><span class="header-section-number">4.2</span> Détecter les liens</h2>
<p>Il y a deux principaux types de liens sur les variables réponse :</p>
<ul>
<li><p>les hiérarchies</p>
<ul>
<li>emboîtées</li>
<li>non-emboîtées</li>
</ul></li>
<li><p>les équations du type A = B + C</p>
<ul>
<li>entre les variables réponses</li>
<li>au niveau des champs</li>
</ul></li>
</ul>
</section>
<section id="passer-de-la-liste-de-diffusion-à-la-liste-de-protection" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="passer-de-la-liste-de-diffusion-à-la-liste-de-protection"><span class="header-section-number">4.3</span> Passer de la liste de diffusion à la liste de protection</h2>
<p>La liste de diffusion est la liste de tableaux qui sera effectivement publiée. Elle diffère de la liste de protection qui elle est à établir en fonction des liens entre les différents tableaux. En effet, pour poser le secret pertinemment il faut renseigner les différents liens pour que l’algorithme en tienne compte.</p>
<p>De plus, si les données sont sous forme de micro-données il faut calculer les agrégats qui seront diffusés pour établir la liste de diffusion. En effet, nous ne posons pas le secret sur les micro-données mais sur les agrégats. Pour ce faire la fonction <code>tabul_fun_group</code> permet de facilement construire les tables agrégées sous le bon format pour les mettre en entrée de <code>rtauargus</code>.</p>
</section>
<section id="fiches-exemples-danalyse-de-demandes" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="fiches-exemples-danalyse-de-demandes"><span class="header-section-number">4.4</span> Fiches exemples d’analyse de demandes</h2>
<p>Exemple 1 :</p>
<p><em>Demande</em> - on souhaite diffuser 4 tableaux</p>
<ul>
<li>T1 : population par âge (5 classes), par sexe et par département</li>
<li>T2 : population par sexe, par diplôme et par département</li>
<li>T3 : population par catégorie catégorie socio-professionnelle, par statut d’activité et par département</li>
<li>T4 : population par âge, par sexe et par statut d’activité</li>
</ul>
<p>En formalisant :</p>
<ul>
<li>T1 : pop x {age x sexe x dep}</li>
<li>T2 : pop x {sexe x dip x dep}</li>
<li>T3 : pop x {socpro x act x dep}</li>
<li>T4 : pop x {age x sexe x act}</li>
</ul>
<p><em>Analyse</em></p>
<p>Les tableaux partagent le même champ (sous-entendu) et le même indicateur (population), ils sont donc liés a minima par le total, donc il n’y a pas de sous-demande indépendante.</p>
<p>De plus, certains tableaux ont des variables de croisement communes, il y a un lien sur les marges, les liens n’en sont que renforcés.</p>
<p>Les variables entre elles n’ont pas de lien hiérarchique (le seul niveau géographique est le département), donc les tableaux ne doivent pas être fusionnés.</p>
<p>Finalement, la liste des tableaux à protéger est identique à la liste des tableaux à diffuser.</p>
<p>Exemple 2 :</p>
<p><em>Demande</em> - on souhaite diffuser 7 tableaux</p>
<ul>
<li>T1 : population par âge (5 classes), par sexe et par département</li>
<li>T2 : population par sexe, par diplôme et par département</li>
<li>T3 : population par catégorie catégorie socio-professionnelle, par statut d’activité et par département</li>
<li>T4 : population par âge, par sexe et par statut d’activité</li>
<li>T5 : population par âge (5 classes), par sexe et par région</li>
<li>T6 : population par sexe, par diplôme et par région</li>
<li>T7 : population par catégorie socio-professionnelle, par statut d’activité et par région</li>
</ul>
<p>En formalisant :</p>
<ul>
<li>T1 : pop x {age x sexe x dep}</li>
<li>T2 : pop x {age x dip x dep}</li>
<li>T3 : pop x {socpro x act x dep}</li>
<li>T4 : pop x {age x sexe x act}</li>
<li>T5 : pop x {age x sexe x reg}</li>
<li>T6 : pop x {sexe x dip x reg}</li>
<li>T7 : pop x {socpro x act x reg}</li>
</ul>
<p><em>Analyse</em></p>
<p>Les tableaux partagent le même champ (sous-entendu) et le même indicateur (population), ils sont donc liés a minima par le total, donc il n’y a pas de sous-demande indépendante.</p>
<p>De plus, certains tableaux ont des variables de croisement communes, il y a un lien sur les marges, les liens n’en sont que renforcés.</p>
<p>Deux variables ont un lien hiérarchique (région &gt; département), lorsque l’information est hiérarchisée (et emboîtée) il faut la traiter dans un même tableau en créant une variable hiérarchique qu’on peut appeler par exemple <code>GEO</code>. De plus, on peut fusionner les tableaux partageant les mêmes variables de croisement.</p>
<p>La liste des tableaux à protéger est donc la suivante :</p>
<ul>
<li>T1 : pop x {age x sexe x GEO}</li>
<li>T2 : pop x {sexe x dip x GEO}</li>
<li>T3 : pop x {socpro x act x GEO}</li>
<li>T4 : pop x {age x sexe x act}</li>
<li>où GEO est une variable hiérarchique emboîtant régions et départements</li>
</ul>
<p>Exemple 3 :</p>
<p><em>Demande</em> - on souhaite diffuser 4 tableaux</p>
<ul>
<li>T1 : population par âge (3 classes : &lt;25, 25-55, +55) et par département</li>
<li>T2 : population par âge (5 classes : &lt;15, 15-25, 25-45, 45-65, +65), par sexe et par département</li>
<li>T3 : population par âge (3 classes : &lt;25, 25-55, +55) et par région</li>
<li>T4 : population par âge (5 classes : &lt;15, 15-25, 25-45, 45-65, +65), par sexe et par région</li>
</ul>
<p>En formalisant :</p>
<ul>
<li>T1 : pop x {age_3 x dep}</li>
<li>T2 : pop x {age_5 x sexe x dep}</li>
<li>T3 : pop x {age_3 x reg}</li>
<li>T4 : pop x {age_5 x sexe x reg}</li>
</ul>
<p><em>Analyse</em></p>
<p>Les tableaux partagent le même champ (sous-entendu) et le même indicateur (population), ils sont donc liés a minima par le total, donc il n’y a pas de sous-demande indépendante.</p>
<p>De plus, certains tableaux ont des variables de croisement communes, il y a un lien sur les marges, les liens n’en sont que renforcés.</p>
<p>Deux variables ont un lien hiérarchique (région &gt; département) :</p>
<ul>
<li>les tableaux T1 et T3 partagent les mêmes variables de croisement et peuvent donc être fusionnés</li>
<li>les tableaux T2 et T4 partagent les mêmes variables de croisement et peuvent donc être fusionnés</li>
</ul>
<p>La variable âge est ventilée différemment entre T1 et T2 (ainsi qu’entre T3 et T4). On doit donc se demander si les différentes modalités de l’âge sont emboîtées. On peut présenter la hiérarchie ainsi :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span><span class="dv">25</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span><span class="er">&lt;</span><span class="dv">15</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span><span class="dv">15-25</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dv">25-55</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span><span class="dv">25-45</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span><span class="dv">45-55</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span><span class="dv">55</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="sc">@</span><span class="dv">55-65</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span><span class="dv">65</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Il n’est pas possible d’insérer la modalité 45-65 dans cette hiérarchie, il s’agit donc d’un cas de hiérarchie non-emboîtée. En effet, 45-65 = 45-55 + 55-65 est un agrégat non-emboîté qui devra être traité en construisant un tableau séparé.</p>
<p>Une première étape d’analyse mène à la liste des tableaux à protéger suivante :</p>
<ul>
<li>T1 : pop x {AGE_hrc_princ x GEO}</li>
<li>T1bis : pop x {AGE_hrc_spe x GEO}</li>
<li>T2 : pop x {AGE_hrc_princ x sexe x GEO}</li>
<li>T2bis : pop x {AGE_hrc_spe x sexe x GEO}</li>
<li>où GEO est une variable hiérarchique emboîtant régions et départements</li>
<li>où AGE_hrc_princ (hiérarchie principale) est une variable hiérarchique emboîtant l’ensemble des catégories d’âge hors 45-65</li>
<li>où AGE_hrc_spe (agrégat spécial) a les modalités : 45-65 = 45-55 + 55-65</li>
</ul>
<p>On remarque que T1 est en réalité déjà “contenu” dans T2. Puisque le croisement AGE_hrc_princ x GEO est présente dans T2. De même T1bis est contenu dans T2bis. On peut donc regrouper ces tableau. Finalement, on se retrouve avec cette liste de tableaux à protéger :</p>
<ul>
<li>T1 : pop x {AGE_hrc_princ x sexe x GEO}</li>
<li>T2 : pop x {AGE_hrc_spe x sexe x GEO}</li>
<li>où GEO est une variable hiérarchique emboîtant régions et départements</li>
<li>où AGE_hrc_princ (hiérarchie principale) est une variable hiérarchique emboîtant l’ensemble des catégories d’âge hors 45-65</li>
<li>où AGE_hrc_spe (agrégat spécial) a les modalités : 45-65 = 45-55 + 55-65</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03_notions.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Notions principales à connaître</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./05_les_outils.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Présentation des outils</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>